##
## Beschreibung zu Folge 035: 
##

- Titel: Minecraft Datapack Tutorial [1.21.11+] #035 - Custom Trading - Teil 3 - Dialog: Notice,multi-action,dialog_list

- Video: preparing

- Unterstützungslink: https://www.amazon.de/hz/wishlist/ls/SG7NGDIC0GEK?ref_=wl_share


## Ziele der Folge:

- Dialog
- scoreboard und trigger im Dialog

## Agenda zum Video:

1. Vorstellung
2. Ziel der Folge
3. Istzustand
4. Dialog Fenster: Notice, Multi_Action, Dialog_List, Confirmation
5. Dialogfenster mit Generator zusammenbauen
6. Scoreboard mit Trigger
7. Zusammenfassung

##
## ============================================================================================================================================
##

## Links:

Minecraft Wiki:
- https://de.minecraft.wiki/

Dialog Generator:
- https://misode.github.io/dialog/


## Neue Datapack Struktur:

# Datapack Strucktur:
# (+) = Neu
# (>) = Bearbeiten
# (-) = Entfernen
# (*) = Alt/Vorhanden
* Economic_System
    * data
        * e_s__vendors
            * function
                * vendor1
                    > dialog.mcfunction
                    > switch.mcfunction
### Dateien: (Kommenrtare entfernt)
## dialog.mcfunction
scoreboard players enable @s E_S.Vendor_Panda_Village_reset

scoreboard players enable @s E_S.Vendor_Panda_Village_buy_apple
scoreboard players enable @s E_S.Vendor_Panda_Village_sell_rotten_flesh

dialog show @s {\
  "type": "minecraft:dialog_list",\
  "title": "Farmer - Händler",\
  "body": [],\
  "inputs": [],\
  "can_close_with_escape": true,\
  "pause": false,\
  "after_action": "close",\
  "exit_action": {\
    "label": "Schließen",\
    "action": {\
			"type": "minecraft:run_command",\
			"command": "trigger E_S.Vendor_Panda_Village_reset set 1"\
		}\
  },\
  "columns": 2,\
  "dialogs": [\
    {\
      "type": "minecraft:dialog_list",\
      "title": "Ankauf",\
      "external_title": "Verkauf an den Händler",\
      "can_close_with_escape": true,\
      "pause": false,\
      "exit_action": {\
        "label": "Schließen",\
		    "action": {\
    				"type": "minecraft:run_command",\
    				"command": "trigger E_S.Vendor_Panda_Village_reset set 1"\
 				}\
      },\
      "dialogs": [\
        {\
          "type": "minecraft:confirmation",\
          "title": "Verrottetes Fleisch",\
  				"body": [\
    				{\
      				"type": "minecraft:item",\
      				"item": {\
	        			"id": "minecraft:rotten_flesh"\
  	    			},\
    				},\
    				{\
      				"type": "minecraft:plain_message",\
              "contents": "An den Händler für x Credits pro Stück verkaufen"\
    				}\
  				],\
  				"inputs": [\
    				{\
      				"type": "minecraft:number_range",\
	      			"key": "sell1",\
  	    			"label": "Verkaufe",\
    	  			"start": 0,\
      				"end": 64,\
      				"step": 1,\
      				"initial": 0\
	    			}\
  				],\
          "yes": {\
            "label": "Verkaufen",\
				    "action": {\
      				"type": "minecraft:run_command",\
      				"command": "trigger E_S.Vendor_Panda_Village_sell_rotten_flesh set 1"\
    				}\
          },\
          "no": {\
            "label": "Schließen ohne Verkauf",\
				    "action": {\
      				"type": "minecraft:run_command",\
      				"command": "trigger E_S.Vendor_Panda_Village_reset set 1"\
    				}\
          }\
        }\
      ]\
    },\
    {\
      "type": "minecraft:dialog_list",\
      "title": "Verkauf",\
      "external_title": "Vom Händler kaufen",\
      "body": [],\
      "can_close_with_escape": true,\
      "pause": false,\
      "exit_action": {\
        "label": "Schließen",\
		    "action": {\
    				"type": "minecraft:run_command",\
    				"command": "trigger E_S.Vendor_Panda_Village_reset set 1"\
 				}\
      },\
      "dialogs": [\
				{\
  				"type": "minecraft:confirmation",\
  				"title": "Kauf / Verkaufen von X",\
  				"body": [\
    				{\
      				"type": "minecraft:item",\
      				"item": {\
	        			"id": "minecraft:apple"\
  	    			},\
    				},\
    				{\
      				"type": "minecraft:plain_message",\
      				"contents": "Kaufe für x Credits pro stück vom Händler"\
    				}\
  				],\
  				"inputs": [\
    				{\
      				"type": "minecraft:number_range",\
	      			"key": "buy1",\
  	    			"label": "Kaufe",\
    	  			"start": 0,\
      				"end": 64,\
      				"step": 1,\
      				"initial": 0\
	    			}\
  				],\
  				"can_close_with_escape": true,\
	  			"pause": false,\
  				"after_action": "close",\
  				"yes": {\
    				"label": "Kaufen",\
				    "action": {\
      				"type": "minecraft:run_command",\
      				"command": "trigger E_S.Vendor_Panda_Village_buy_apple set 1"\
    				}\
  				},\
	  			"no": {\
  	  			"label": "Schließen ohne Kaufen",\
				    "action": {\
      				"type": "minecraft:run_command",\
      				"command": "trigger E_S.Vendor_Panda_Village_reset set 1"\
    				}\
  				}\
				}\
      ]\
    }\
  ]\
}




## switch.mcfunction
scoreboard objectives add E_S.Vendor_Panda_Village_reset trigger


scoreboard objectives add E_S.Vendor_Panda_Village_sell_rotten_flesh trigger
scoreboard objectives add E_S.Vendor_Panda_Village_buy_apple trigger



execute positioned 1742 65 204 unless entity @e[tag=E_S.Vendors_Panda_Village_villager, distance=..3] run function e_s__vendors:summon_entities
execute positioned 1742 65 204 unless entity @e[tag=E_S.Vendors_Panda_Village_interaction, distance=..3] run function e_s__vendors:summon_entities


function e_s__vendors:interaction